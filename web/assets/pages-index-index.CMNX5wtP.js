import{_ as e,p as l,s as o,q as t,r as a,u as s,v as n,t as u,d as c,w as i,i as r,o as d,e as f,f as h,g,x as m,l as _,k as w}from"./index-Bg8HKLxi.js";const p=e({data:()=>({userInfo:null,showFullPhone:!1}),onLoad(){this.userInfo=l("userInfo")||{}},onShow(){this.userInfo=l("userInfo")||{}},methods:{togglePhoneShow(){this.showFullPhone=!this.showFullPhone},formatPhone:e=>e&&11===e.length?e.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2"):"未绑定手机号",goPointsDetail(){o({title:"金币明细开发中",icon:"none"})},goWithdrawRecord(){o({title:"提现记录开发中",icon:"none"})},goWithdraw(){t({title:"提现",content:"暂未开发成功，只是测试版本，不予兑换",showCancel:!1})},goAgreement(){a({url:"/pages/agreement/agreement"})},logout(){t({title:"退出登录",content:"确定要退出吗？",success:e=>{e.confirm&&(s("userInfo"),n({url:"/pages/login/login"}))}})},showDeleteModal(){t({title:"注销账号",content:"请输入登录密码",editable:!0,success:async e=>{if(!e.confirm)return;const l=e.content;if(l)try{const e=await u.callFunction({name:"deleteAccount",data:{userId:this.userInfo._id,password:l}});0===e.result.code?(o({title:"账号已注销"}),s("userInfo"),setTimeout((()=>{n({url:"/pages/login/login"})}),1500)):o({title:e.result.msg||"密码错误",icon:"none"})}catch(t){o({title:"请求失败",icon:"none"})}else o({title:"请输入密码",icon:"none"})}})}}},[["render",function(e,l,o,t,a,s){const n=m,u=_,p=r,k=w;return d(),c(p,{class:"my-page"},{default:i((()=>[f(n,{src:"/assets/avatar-DfAK_a0U.png",class:"avatar",mode:"aspectFill"}),f(p,{class:"phone-item"},{default:i((()=>[f(u,{class:"label"},{default:i((()=>[h("测试中还未发布正式版本")])),_:1})])),_:1}),f(p,{class:"phone-item",onClick:s.togglePhoneShow},{default:i((()=>[f(u,{class:"label"},{default:i((()=>[h("手机号：")])),_:1}),f(u,{class:"value"},{default:i((()=>[h(g(a.showFullPhone?a.userInfo.phone:s.formatPhone(a.userInfo.phone)),1)])),_:1})])),_:1},8,["onClick"]),f(p,{class:"info-item",onClick:s.goPointsDetail},{default:i((()=>[f(u,null,{default:i((()=>[h("金币数量：")])),_:1}),f(u,{class:"value"},{default:i((()=>{var e;return[h(g((null==(e=a.userInfo)?void 0:e.points)||0),1)]})),_:1})])),_:1},8,["onClick"]),f(p,{class:"menu-item",onClick:s.goWithdrawRecord},{default:i((()=>[f(u,null,{default:i((()=>[h("提现记录")])),_:1}),f(u,{class:"arrow"},{default:i((()=>[h(">")])),_:1})])),_:1},8,["onClick"]),f(p,{class:"menu-item",onClick:s.goWithdraw},{default:i((()=>[f(u,null,{default:i((()=>[h("我要提现")])),_:1}),f(u,{class:"arrow"},{default:i((()=>[h(">")])),_:1})])),_:1},8,["onClick"]),f(p,{class:"menu-item",onClick:s.goAgreement},{default:i((()=>[f(u,null,{default:i((()=>[h("用户协议与隐私政策")])),_:1}),f(u,{class:"arrow"},{default:i((()=>[h(">")])),_:1})])),_:1},8,["onClick"]),f(p,{class:"menu-item"},{default:i((()=>[f(u,null,{default:i((()=>[h("客服：1299416302")])),_:1})])),_:1}),f(k,{class:"btn logout",onClick:s.logout},{default:i((()=>[h("退出登录")])),_:1},8,["onClick"]),f(k,{class:"btn delete-account",onClick:s.showDeleteModal},{default:i((()=>[h("注销账号")])),_:1},8,["onClick"])])),_:1})}],["__scopeId","data-v-fe027fca"]]);export{p as default};
